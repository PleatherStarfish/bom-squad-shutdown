<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <meta name="robots" content="noindex,nofollow" />
  <title>Bom Squad is closed</title>
  <link rel="stylesheet" href="./style.css" />
</head>
<body>
  <main class="wrap">
    <div class="card">
      <h1>Bom Squad is closed</h1>

      <p class="lead">
        Bom Squad has been shut down and is no longer operating.
      </p>

      <p>
        If you previously used Bom Squad and want a CSV copy of your data, email us with the details below.
      </p>

      <div class="actions">
        <a class="btn secondary" href="https://www.tacet.space/blog" target="_blank" rel="nofollow noopener noreferrer">
          Read the blog
        </a>
      </div>

      <div class="fineprint">
        <p>
          <strong>How to request your CSV export</strong><br />
          1) Email: <span id="emailDisplay">lontano [dot] composer [at] gmail [dot] com</span>
          <button class="btn secondary" id="copyEmailButton" type="button">Copy email</button>
          <span id="copyStatus" aria-live="polite"></span><br />
          2) Subject: <span>Bom Squad data export request</span><br />
          3) Include in your message:
        </p>

        <ul>
          <li>Your account email</li>
          <li>Approximate date range of your usage (if you remember)</li>
          <li>Any other helpful details</li>
        </ul>
      </div>

      <noscript>
        <p class="fineprint">
          JavaScript is disabled. Please email:
          lontano [dot] composer [at] gmail [dot] com
          <br />
          Subject: Bom Squad data export request
          <br />
          Include: account email, approximate date range, and any other details.
        </p>
      </noscript>
    </div>
  </main>

  <script>
    // Obfuscated email: base64 bytes, XOR decode, then allow copy without relying on mailto.
    (function () {
      var k = 23;
      var b64 = "e3h5Y3Z5eDl0eHpneGRyZVdwenZ+ezl0eHo=";

      function b64ToBytes(s) {
        var bin = atob(s);
        var out = new Array(bin.length);
        for (var i = 0; i < bin.length; i++) out[i] = bin.charCodeAt(i);
        return out;
      }

      function decodeEmail() {
        var bytes = b64ToBytes(b64);
        var email = "";
        for (var i = 0; i < bytes.length; i++) {
          email += String.fromCharCode(bytes[i] ^ k);
        }
        return email;
      }

      var email = decodeEmail();

      var display = document.getElementById("emailDisplay");
      var copyBtn = document.getElementById("copyEmailButton");
      var status = document.getElementById("copyStatus");

      if (display) {
        // Keep spam-protected display text.
        display.textContent = email.replace("@", " [at] ").replace(/\./g, " [dot] ");
        display.title = "Use the Copy email button to copy the real address.";
      }

      if (copyBtn) {
        copyBtn.addEventListener("click", function () {
          if (!navigator.clipboard || !navigator.clipboard.writeText) {
            if (status) status.textContent = "Copy is not supported here. Please type the address shown.";
            return;
          }

          navigator.clipboard.writeText(email).then(
            function () {
              if (status) status.textContent = "Copied.";
            },
            function () {
              if (status) status.textContent = "Copy failed. Please type the address shown.";
            }
          );
        });
      }
    })();
  </script>
</body>
</html>
